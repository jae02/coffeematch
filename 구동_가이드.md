# ☕ CoffeeMatch 구동 가이드

## 📋 시스템 요구사항

프로젝트를 실행하기 위해 다음 소프트웨어가 필요합니다:

- **Java**: JDK 17 이상 ✅ (현재: Java 21)
- **Node.js**: 18 이상 ✅ (현재: v20.17.0)
- **Docker**: Docker Desktop ✅ (현재: 29.1.3)
- **Maven**: 3.x 이상 (선택사항)

## 🚀 빠른 시작 (Docker Compose 사용 - 권장)

Docker Compose를 사용하면 데이터베이스, 백엔드, 프론트엔드를 한 번에 실행할 수 있습니다.

### 1단계: Docker 실행 확인

Docker Desktop이 실행 중인지 확인하세요.

### 2단계: 모든 서비스 시작

```bash
cd docker
docker-compose up -d
```

### 3단계: 서비스 상태 확인

```bash
docker-compose ps
```

다음과 같이 3개의 컨테이너가 실행 중이어야 합니다:
- `creama-db` (MySQL 데이터베이스)
- `creama-backend` (Spring Boot 백엔드)
- `creama-frontend` (Vue 3 프론트엔드)

### 4단계: 애플리케이션 접속

- **프론트엔드**: http://localhost:5173
- **백엔드 API**: http://localhost:8080/api/cafes

### 서비스 중지

```bash
docker-compose down
```

---

## 🔧 개별 실행 방식 (개발 모드)

각 서비스를 개별적으로 실행하려면 다음 순서를 따르세요.

### 1. 데이터베이스 실행

```bash
cd docker
docker-compose up -d db
```

데이터베이스는 `localhost:3307`에서 실행됩니다.

**연결 정보:**
- Host: `localhost`
- Port: `3307`
- Database: `coffeematch`
- Username: `root`
- Password: `1234`

### 2. 백엔드 실행

#### 방법 A: Docker 사용

```bash
cd docker
docker-compose up -d backend
```

#### 방법 B: Maven 사용 (Maven 설치 필요)

```bash
cd backend
mvn spring-boot:run
```

백엔드는 `http://localhost:8080`에서 실행됩니다.

### 3. 프론트엔드 실행

#### 방법 A: Docker 사용

```bash
cd docker
docker-compose up -d frontend
```

#### 방법 B: npm 사용 (개발 모드)

```bash
cd frontend
npm install  # 최초 1회만 실행
npm run dev
```

프론트엔드는 `http://localhost:5173`에서 실행됩니다.

---

## 📦 프로젝트 구조

```
coffeematch/
├── backend/          # Spring Boot 백엔드
├── frontend/         # Vue 3 프론트엔드
├── docker/           # Docker 설정 파일
│   ├── docker-compose.yml
│   └── init.sql     # 초기 데이터
└── crawler/          # 데이터 크롤러
```

---

## 🔍 문제 해결

### Docker 컨테이너가 시작되지 않을 때

1. Docker Desktop이 실행 중인지 확인
2. 포트 충돌 확인 (3307, 8080, 5173)
3. 로그 확인:
   ```bash
   docker-compose logs
   ```

### 백엔드 연결 오류

1. 데이터베이스가 먼저 실행되었는지 확인
2. 백엔드 로그 확인:
   ```bash
   docker-compose logs backend
   ```

### 프론트엔드가 백엔드에 연결되지 않을 때

1. 백엔드가 `http://localhost:8080`에서 실행 중인지 확인
2. CORS 설정 확인 (백엔드는 `http://localhost:5173`을 허용하도록 설정됨)

### 포트가 이미 사용 중일 때

다른 프로그램이 포트를 사용 중이면 `docker-compose.yml`에서 포트를 변경하세요:

```yaml
ports:
  - "3308:3306"  # 3307 대신 3308 사용
```

---

## 📊 초기 데이터

프로젝트에는 5개의 샘플 카페 데이터가 포함되어 있습니다:

1. **Starbrew** - 클래식한 커피 경험
2. **Espresso Lab** - 장인의 에스프레소
3. **Morning Dew** - 아침 커피 전문
4. **Cafe Noir** - 다크 로스트 전문
5. **Golden Mug** - 프리미엄 블렌드

각 카페는 3개의 메뉴 항목을 가지고 있습니다.

---

## 🛠 개발 팁

### 프론트엔드 개발

프론트엔드를 수정할 때는 npm 개발 모드를 사용하는 것이 좋습니다:

```bash
cd frontend
npm run dev
```

파일을 저장하면 자동으로 새로고침됩니다.

### 백엔드 개발

백엔드 코드를 수정한 후에는 재시작이 필요합니다:

```bash
# Docker 사용 시
docker-compose restart backend

# Maven 사용 시
Ctrl+C로 중지 후 mvn spring-boot:run
```

### 데이터베이스 초기화

데이터베이스를 초기 상태로 되돌리려면:

```bash
docker-compose down -v  # 볼륨 삭제
docker-compose up -d    # 재시작
```

---

## 📝 추가 정보

- **API 문서**: 백엔드 실행 후 Swagger UI는 별도로 설정되지 않았습니다.
- **환경 변수**: `docker-compose.yml`에서 데이터베이스 연결 정보를 수정할 수 있습니다.
- **프로덕션 빌드**: 
  - 프론트엔드: `npm run build`
  - 백엔드: `mvn clean package`

---

## 🎯 다음 단계

1. 프로젝트가 정상적으로 실행되는지 확인
2. http://localhost:5173 에서 카페 목록 확인
3. 카페 상세 페이지에서 리뷰 작성 테스트
4. 새로운 기능 개발 시작!

---

**문제가 발생하면 GitHub Issues에 등록해주세요**: https://github.com/jae02/coffeematch/issues
